<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Manejar requests en subdirectorio ModuStackAdmin
    # Si el request es directamente a public/ o archivos estáticos, permitirlo
    RewriteCond %{REQUEST_URI} ^/ModuStackAdmin/public/
    RewriteRule ^(.*)$ - [L]
    
    # Si es un archivo existente (js, css, imágenes), permitirlo
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule ^(.*)$ - [L]
    
    # Si es un directorio existente, permitirlo
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^(.*)$ - [L]
    
    # Redirigir requests en /ModuStackAdmin/ a public/
    RewriteCond %{REQUEST_URI} ^/ModuStackAdmin/
    RewriteRule ^ModuStackAdmin/(.*)$ public/$1 [L]
    
    # Si está en la raíz del proyecto (sin subdirectorio), redirigir a public/
    RewriteCond %{REQUEST_URI} !^/ModuStackAdmin/
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ public/$1 [L]
</IfModule>
