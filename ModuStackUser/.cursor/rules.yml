rules:
  rules_adicionales:
  - "REGLAS CRÍTICAS DE FRONTEND - NUNCA DEBE SER SALTADA: El frontend del proyecto siempre debe manejarse exclusivamente con la plantilla AdminLTE.
     Toda implementación, modificación o desarrollo de interfaces de usuario debe seguir estrictamente la documentación oficial de AdminLTE disponible en su sitio web oficial.
     Esta regla es de máxima importancia y tiene prioridad sobre cualquier otra consideración de diseño o desarrollo frontend.
     Antes de implementar cualquier componente visual, formulario, layout o funcionalidad de interfaz, debe consultarse la documentación oficial de AdminLTE para asegurar el uso correcto de sus componentes, clases CSS y estructura HTML.
     No se deben utilizar otros frameworks de CSS o plantillas alternativas para el frontend del proyecto."

  - "IMPLEMENTACIÓN DE ADMINLTE CON CDN - OBLIGATORIO: Después de instalar la plantilla AdminLTE en el proyecto, todos los archivos CSS, JavaScript y SCSS deben ser reemplazados por enlaces CDN.
     No se debe utilizar compilación con npm, webpack, vite o cualquier otro bundler para los assets de AdminLTE.
     Todos los recursos de AdminLTE (CSS, JS, plugins, iconos) deben ser cargados directamente desde CDN en las vistas Blade.
     Esta regla es obligatoria ya que el proyecto no permite compilación de assets con npm.
     Se debe verificar la documentación oficial de AdminLTE para obtener las URLs CDN más recientes y actualizadas."

  - "SEEDER DE USUARIO ROOT Y ROL SUPER USUARIO: Debe existir un seeder que cree automáticamente un rol de 'Super Usuario' (o 'Super Admin') y un usuario de prueba llamado 'root'.
     Este seeder debe:
       - Crear el rol 'Super Usuario' con todos los permisos disponibles o máximo nivel de acceso.
       - Crear el usuario 'root' con credenciales de prueba (email, password) y asignarle el rol de Super Usuario.
       - Las credenciales del usuario root deben ser documentadas y accesibles para propósitos de desarrollo y pruebas.
       - El seeder debe poder ejecutarse de forma independiente o como parte de un proceso de inicialización del proyecto.
     Adicionalmente, se debe crear un script shell (.sh) que automatice la ejecución de:
       - Migraciones de base de datos (php artisan migrate)
       - Seeders (php artisan db:seed, incluyendo el seeder del usuario root)
       - Cualquier otro comando necesario para la inicialización del proyecto (opcional: cache:clear, config:clear, etc).
     Este script debe estar ubicado en la raíz del proyecto y ser ejecutable para facilitar el setup inicial del entorno de desarrollo."

  - "Cada vez que ocurra un error en el sistema, debe documentarse en la carpeta 'log_errores/'.
     El registro debe clasificarse automáticamente según el tipo de error:
       - 'backend/' si proviene de controladores, servicios, modelos o comandos Artisan.
       - 'frontend/' si proviene de vistas Blade, componentes JS o assets públicos.
     Dentro de cada tipo, debe asignarse una subcarpeta por nivel de severidad:
       - 'bajo/' para errores menores o de interfaz.
       - 'medio/' para errores funcionales o de lógica de negocio.
       - 'alto/' para errores críticos, de seguridad o pérdida de datos.
     Cada archivo de log debe contener: fecha, componente/área afectada, archivo afectado, descripción, y acción correctiva aplicada."

  - "Toda solución implementada a un error o mejora debe estar validada para compatibilidad con Laravel 12 (arquitectura tradicional, sin complementos modulares).
     Antes de confirmarse, debe verificarse la fuente en internet (documentación oficial, foros técnicos o repositorios confiables)
     para asegurar una respuesta óptima, segura y alineada con buenas prácticas actuales."

  - "Después de finalizar cualquier cambio, funcionalidad o componente, este debe documentarse dentro de una carpeta bajo 'documentacion/'.
     El nombre de la carpeta debe seguir el formato: 'documentacion_<nombre_del_componente>' (ejemplo: 'documentacion_autenticacion', 'documentacion_api').
     Dentro de ella, debe incluirse un archivo Markdown (.md) con:
       - Descripción general.
       - Archivos modificados o creados.
       - Dependencias involucradas.
       - Pasos de prueba o despliegue.
       - Enlaces o referencias externas consultadas.
     Toda nueva optimización, mejora o funcionalidad sugerida debe registrarse como documento independiente dentro de 'documentacion/'
     con referencia a las fuentes técnicas verificadas en internet."

  - "Todo componente, controlador, modelo o función —sin importar su tamaño— debe contar con una prueba automatizada (testing) que verifique su correcto funcionamiento.
    Estas pruebas deben:
      - Crearse preferiblemente con PHPUnit (para backend) o Jest/Vite (para frontend).
      - Validar el comportamiento esperado, las rutas, las respuestas y los permisos de acceso.
      - Generar un reporte con resultados y cobertura en la carpeta 'documentacion/logs_de_pruebas/'."
  - "MIGRACIONES IDÉMPOTENTES OBLIGATORIAS: Cada archivo de migración debe validar la existencia de tablas o columnas antes de crearlas o eliminarlas.
    - Usar `Schema::hasTable` y `Schema::hasColumn` para evitar errores 'Base table or view already exists' o 'Unknown column'.
    - Si una tabla ya existe, la migración debe omitir su creación y continuar con las demás operaciones necesarias.
    - Las migraciones que agregan columnas deben comprobar si la columna ya existe antes de agregarla y antes de eliminarla en el método `down()`.
    - Cualquier nueva migración debe documentar estas validaciones en su revisión de código."

  # Adicionalmente (comentado por el momento):
  #   - Debe existir una base de datos de prueba independiente (configurable en '.env.testing')
  #     que permita ejecutar las pruebas sin afectar datos reales del entorno de desarrollo o producción.
  #   - Las pruebas deben poder ejecutarse y automatizarse desde consola mediante un comando, por ejemplo:
  #       php artisan test --parallel --coverage
  #     o desde un panel visual integrado en el sistema.
  #   - Debe existir una opción de automatización (por CRON o Git Hook) que ejecute los tests después de cada cambio detectado en un componente.
  #   - Los resultados deben almacenarse y versionarse para auditoría en 'documentacion/logs_de_pruebas/history/'.
  - "Cada vez que se detecte un cambio en cualquier componente del proyecto desde la raíz, generar un archivo técnico maestro que documente todos los archivos y componentes del proyecto.
     Este archivo debe:
       - Estar ubicado en 'documentacion/archivo_tecnico_proyecto.md'.
       - Incluir lista completa de archivos, rutas, controladores, modelos, servicios y dependencias.
       - Señalar los componentes modificados, agregados o eliminados desde el último registro.
       - Indicar observaciones sobre posibles mejoras, refactorizaciones, problemas detectados o optimizaciones pendientes.
     Adicionalmente:
       - Generar automáticamente un archivo complementario llamado 'mejoras_<fecha>.md' en la misma carpeta, que documente:
           - Mejoras de componentes sugeridas.
           - Ajustes de rendimiento.
           - Recomendaciones de compatibilidad con Laravel 12 (arquitectura tradicional).
           - Posibles optimizaciones de código o arquitectura.
       - Todo esto debe integrarse bajo las reglas de documentación, auditoría y testing previamente definidas en la carpeta 'documentacion/'."
